---
import WindowBase from "./WindowBase.astro";
import { profile } from "../data/profile";

const githubLabel = profile.links.github
	? "@" + profile.links.github.split("/").filter(Boolean).pop()
	: "";
const twitterLabel = profile.links.twitter
	? "@" + (profile.links.twitter as string).split("/").filter(Boolean).pop()
	: "";
let linkedinLabel = "";
try {
	linkedinLabel = profile.links.linkedin
		? new URL(profile.links.linkedin).pathname
		: "";
} catch {
	linkedinLabel = profile.links.linkedin || "";
}
---

<WindowBase
	title="Contact"
	x={24}
	y={350}
	width={420}
	height={240}
	zIndex={13}
	windowId="contact-window"
>
	<div id="contact" class="guide">
		<div class="guide-title">Contact {profile.name}</div>
		<p class="text-sm">Las formas más rápidas de comunicarte:</p>
		<ul class="guide-list text-sm">
			{profile.location && <li>Ubicación: {profile.location}</li>}
			{profile.phone && (
				<li>
					Teléfono: <a href={`tel:${profile.phone}`} class="btn-link">{profile.phone}</a>
				</li>
			)}
			<li>
				Email principal: <a href={profile.links.email} class="btn-link">{profile.contactEmail}</a>
			</li>
			{profile.secondaryEmails && profile.secondaryEmails.length > 0 && (
				<li>Otros emails: {profile.secondaryEmails.join(" · ")}</li>
			)}
			{profile.links.linkedin && (
				<li>
					LinkedIn: <a href={profile.links.linkedin} class="btn-link" rel="noopener noreferrer" target="_blank">{linkedinLabel}</a>
				</li>
			)}
			{profile.links.github && (
				<li>
					GitHub: <a href={profile.links.github} class="btn-link" rel="noopener noreferrer" target="_blank">{githubLabel}</a>
				</li>
			)}
			{profile.links.twitter && (
				<li>
					Twitter: <a href={profile.links.twitter} class="btn-link" rel="noopener noreferrer" target="_blank">{twitterLabel}</a>
				</li>
			)}
		</ul>

		<div class="guide-pager" aria-label="Pager">
			<button class="pager-btn" type="button" aria-label="Anterior" disabled>◀</button>
			<span class="pager-index" aria-live="polite">1</span>
			<button class="pager-btn" type="button" aria-label="Siguiente" disabled>▶</button>
		</div>
	</div>
</WindowBase>

<style is:inline>
	.guide { font-size: var(--fs-10); line-height: 1.35; }
	.guide-title { font-weight: 700; margin-bottom: 6px; }
	.guide-list { list-style: disc; padding-left: 1.1rem; margin: 8px 0; }
	.guide-pager { display: flex; gap: 6px; justify-content: flex-end; margin-top: 8px; }
	.pager-btn { width: 18px; height: 18px; border: 1px solid var(--black); background:#fff; line-height: 14px; padding:0; }
	.pager-btn[disabled] { opacity: .6; }
	.pager-index { display:inline-block; min-width: 18px; text-align: center; border:1px solid var(--black); }
</style>
