---
import WindowBase from "./WindowBase.astro";
import { profile } from "../data/profile";

const githubLabel = profile.links.github
	? "@" + profile.links.github.split("/").filter(Boolean).pop()
	: "";
const twitterLabel = profile.links.twitter
	? "@" + (profile.links.twitter as string).split("/").filter(Boolean).pop()
	: "";
let linkedinLabel = "";
try {
	linkedinLabel = profile.links.linkedin
		? new URL(profile.links.linkedin).pathname
		: "";
} catch {
	linkedinLabel = profile.links.linkedin || "";
}
---

<WindowBase
	title="About"
	x={24}
	y={40}
	width={520}
	height={300}
	zIndex={11}
	windowId="about-window"
>
	<div id="about" class="guide">
		<div class="guide-title">About {profile.name}</div>
		<p class="text-sm">
			{profile.intro}
		</p>
		<ul class="guide-list">
			<li>Microservicios en Java y Spring Boot</li>
			<li>Pruebas automatizadas: JUnit y Mockito</li>
			<li>Base de datos: MongoDB</li>
			<li>APIs orientadas a eventos con AWS Lambda (Python)</li>
			<li>Metodologías ágiles: Scrum</li>
		</ul>
		<p class="text-sm opacity-80">
			{profile.location && (<span>{profile.location} · </span>)}
			<a href={profile.links.linkedin} class="btn-link" rel="noopener noreferrer" target="_blank">LinkedIn {linkedinLabel}</a>
			{profile.links.github && (
				<>
					{" · "}
					<a href={profile.links.github} class="btn-link" rel="noopener noreferrer" target="_blank">GitHub {githubLabel}</a>
				</>
			)}
			{" · "}
			<a href={profile.links.email} class="btn-link">{profile.contactEmail}</a>
		</p>

		<div class="guide-pager" aria-label="Pager">
			<button class="pager-btn" type="button" aria-label="Anterior" disabled>◀</button>
			<span class="pager-index" aria-live="polite">1</span>
			<button class="pager-btn" type="button" aria-label="Siguiente" disabled>▶</button>
		</div>
	</div>
</WindowBase>

<style is:inline>
	.guide { font-size: var(--fs-10); line-height: 1.35; }
	.guide-title { font-weight: 700; margin-bottom: 6px; }
	.guide-list { list-style: disc; padding-left: 1.1rem; margin: 8px 0; }
	.guide-pager { display: flex; gap: 6px; justify-content: flex-end; margin-top: 8px; }
	.pager-btn { width: 18px; height: 18px; border: 1px solid var(--black); background:#fff; line-height: 14px; padding:0; }
	.pager-btn[disabled] { opacity: .6; }
	.pager-index { display:inline-block; min-width: 18px; text-align: center; border:1px solid var(--black); }
</style>
