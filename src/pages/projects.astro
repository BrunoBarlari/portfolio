---
import Base from "../layouts/Base.astro";
import MenuBar from "../components/MenuBar.astro";
import Desktop from "../components/Desktop.astro";
import DraggableWindow from "../components/DraggableWindow.astro";
import { projects } from "../data/projects";
const base = (import.meta as any).env?.BASE_URL || "/";
---

<Base
	title="Projects | Portfolio"
	description="Proyectos seleccionados y casos de estudio."
>
	<MenuBar currentPath={Astro.url.pathname} />
	<Desktop>
		<DraggableWindow
			title="Projects"
			x={24}
			y={40}
			width={520}
			height={220}
			zIndex={11}
		>
			<h1 class="hero-name">Projects</h1>
			<p class="mt-3 text-sm leading-relaxed">
				Trabajo en soluciones centradas en rendimiento, DX y claridad
				arquitect贸nica. Algunos ejemplos:
			</p>
		</DraggableWindow>

		<DraggableWindow
			title="Listado"
			x={24}
			y={280}
			width={800}
			height={420}
			zIndex={12}
		>
			<div class="projects-list">
				{
					projects.map((p) => (
						<article class="project">
							<h3 class="project-title">
								{p.title} {p.year && <small class="year">路 {p.year}</small>}
							</h3>
							<p class="project-summary">{p.summary}</p>
							{p.tech && <p class="project-tech">{p.tech.join(" 路 ")}</p>}
							{p.links && p.links.length > 0 && (
								<p class="project-links">
									{p.links
										.map((l) => (
											<a
												href={l.url}
												class="btn-link"
												rel="noopener noreferrer"
												target={l.url.startsWith("http") ? "_blank" : undefined}
											>
												{l.label}
											</a>
										))
										.reduce(
											(acc, el, i, arr) =>
												acc.concat(el, i < arr.length - 1 ? " 路 " : ""),
											[]
										)}
								</p>
							)}
						</article>
					))
				}
			</div>
		</DraggableWindow>

		<DraggableWindow
			title="Back"
			x={850}
			y={40}
			width={220}
			height={120}
			zIndex={13}
		>
			<p class="text-sm">
				Volver a <a href={base} class="btn-link">Inicio</a>.
			</p>
		</DraggableWindow>
	</Desktop>
</Base>
